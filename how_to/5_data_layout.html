<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title> | ImcFamosFile </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content=" | ImcFamosFile ">
    <meta name="generator" content="docfx 2.56.2.0">
    
    <link rel="shortcut icon" href="../images/icon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet"> 
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    
    
  </head>  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../images/logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">

<p>The buffers in the <code>BufferInfo</code> and the <code>PackInfo</code> properties of a component define how the data is written to and read from a file. You can modify these values by yourself, but this implementation supports two default alignment modes out of the box as described <a class="xref" href="../api/ImcFamosFile.FamosFileAlignmentMode.html">here</a>.</p>
<p>When you read a file using <code>FamosFile.Open(...)</code> it contains definitions for the buffers, pack infos and raw blocks so that everything is aligned properly.</p>
<p>When you instead create a file by yourself via <code>var famosFile = new FamosFileHeader();</code>, the instance is empty. To reduce complexity, whenever you create a component, a default buffer and pack info, and - depending on the constructor - a default channel instance is created.</p>
<p>But the default values of the buffers and pack infos are not correct as they all point to the same region in the file. Thus, when you call <code>famosFile.Save(...)</code>, a data alignment is performed.</p>
<p>This ensures that all buffers point to unique regions in the file and - most importantly - it ensures that there is a <a class="xref" href="../api/ImcFamosFile.FamosFileRawBlock.html">raw block</a> instance available to hold the actual data.</p>
<p>To disable this default mode, you need to call the save method likes this: <code>famosFile.Save(..., autoAlign: false)</code>.</p>
<p>In that case you are responsible to create and align the buffers correctly. The same is required when you want you data aligned in interlaced mode. In this mode, the data are written in a row-wise manner to a single large buffer which degrades performance when you want to read the data channel-wise but improves performance when you need to read the data of all channels at a specific time.</p>
<p>The storage procedure for interlaced data is shown here:</p>
<pre><code class="lang-cs">/* A raw block must be added manually when option 'autoAlign: false'. is set. */
famosFile.RawBlocks.Add(new FamosFileRawBlock());

/* Align buffers (lengths and offsets) to get an interlaced layout.*/
famosFile.AlignBuffers(famosFile.RawBlocks.First(), FamosFileAlignmentMode.Interlaced);

/* Save file with option 'autoAlign: false'. */
famosFile.Save(&quot;interlaced.dat&quot;, writer =&gt; Program.WriteFileContent(famosFile, writer), autoAlign: false);
</code></pre>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/Apollo3zehn/ImcFamosFile/blob/dev/doc/how_to/5_data_layout.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            Copyright © 2019 Vincent Wilms
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
